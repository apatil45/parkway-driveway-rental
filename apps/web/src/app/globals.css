/* Leaflet map styles */
@import 'leaflet/dist/leaflet.css';
/* Mapbox GL (when NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN is set) */
@import 'mapbox-gl/dist/mapbox-gl.css';

/* Base: zoom-dependent filter applied in JS (see MapViewDirect) */
.leaflet-tile-pane {
  transition: filter 0.25s ease-out;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom marker styles */
.custom-marker {
  background: transparent !important;
  border: none !important;
}

/* Price pins: match app primary, soft shadow, clear shape */
.price-pin .price-pin-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
}
.price-pin .price-pin-value {
  padding: 5px 9px;
  background: #fff;
  color: rgb(var(--color-primary-600));
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.02em;
  border-radius: 8px;
  white-space: nowrap;
  border: 2px solid #fff;
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.06),
    0 2px 8px rgba(0, 0, 0, 0.12),
    0 4px 12px rgba(0, 0, 0, 0.08);
}

.price-pin-highlighted .price-pin-value {
  border-width: 3px;
  box-shadow:
    0 0 0 2px rgb(var(--color-primary-500) / 0.4),
    0 2px 8px rgba(0, 0, 0, 0.15),
    0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Price pins always dominant on map: above all base map layers (Mapbox marker pane) */
.mapbox-price-pin {
  z-index: 10 !important;
}
.mapbox-price-pin .price-pin-value {
  border: 2px solid #fff;
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.06),
    0 2px 10px rgba(0, 0, 0, 0.15),
    0 4px 14px rgba(0, 0, 0, 0.1);
}

.custom-cluster {
  background: transparent !important;
  border: none !important;
}

@layer base {
  :root {
    /* Primary (blue) scale in R,G,B for opacity support */
    --color-primary-50: 239, 246, 255;
    --color-primary-100: 219, 234, 254;
    --color-primary-200: 191, 219, 254;
    --color-primary-300: 147, 197, 253;
    --color-primary-400: 96, 165, 250;
    --color-primary-500: 59, 130, 246;
    --color-primary-600: 37, 99, 235;
    --color-primary-700: 29, 78, 216;
    --color-primary-800: 30, 64, 175;
    --color-primary-900: 30, 58, 138;

    /* Surfaces */
    --color-surface: 249, 250, 251; /* gray-50 */
    --color-surface-foreground: 17, 24, 39; /* gray-900 */
    --color-border: 229, 231, 235; /* gray-200 */
  }

  .dark {
    --color-surface: 3, 7, 18; /* gray-950 */
    --color-surface-foreground: 243, 244, 246; /* gray-100 */
    --color-border: 31, 41, 55; /* gray-800 */
  }

  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  
  body {
    @apply text-[color:rgb(var(--color-surface-foreground))] bg-[color:rgb(var(--color-surface))];
  }

  /* Heading scale and rhythm */
  h1 { @apply text-3xl md:text-4xl font-bold leading-tight; }
  h2 { @apply text-2xl md:text-3xl font-semibold leading-snug; }
  h3 { @apply text-lg md:text-xl font-semibold leading-snug; }
  p  { @apply leading-relaxed; }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2;
    /* Mobile touch target improvements */
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation; /* Prevents double-tap zoom */
  }
  
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
  }
  
  .btn-secondary {
    @apply bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500;
  }
  
  .btn-outline {
    @apply border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500;
  }
  
  .input {
    @apply w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base transition-shadow;
    min-height: 44px; /* Minimum touch target size - prevents zoom on iOS */
  }
  
  .input:focus {
    box-shadow: 0 0 0 3px rgb(var(--color-primary-500) / 0.2);
  }
  
  .card {
    @apply bg-[color:rgb(var(--color-surface))] text-[color:rgb(var(--color-surface-foreground))] rounded-lg border border-[color:rgb(var(--color-border))] p-6 shadow-sm;
  }

  /* Section spacing for consistent page rhythm */
  .page-section {
    @apply py-12 md:py-16;
  }

  .section-heading {
    @apply text-2xl md:text-3xl font-bold text-gray-900 tracking-tight;
  }

  .section-subheading {
    @apply text-gray-600 mt-1;
  }

  /* Skeletons */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded; /* dark mode will still be acceptable */
  }

  /* Alerts: success and error */
  .alert-success {
    @apply flex items-start gap-3 p-4 rounded-lg bg-green-50 border border-green-200 text-green-800;
  }
  .alert-error {
    @apply flex items-start gap-3 p-4 rounded-lg bg-red-50 border border-red-200 text-red-800;
  }

  /* Accessibility: Visible focus indicators */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary-500;
  }

  /* Skip navigation link */
  .skip-nav {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary-600 focus:text-white focus:rounded-lg focus:font-medium;
  }
}
